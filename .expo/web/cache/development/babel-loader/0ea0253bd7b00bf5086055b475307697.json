{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"/Users/franckcaget/Hedia/frosty/views/RepositoryLine.tsx\";\n\nimport React, { useState, useEffect } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport ActivityIndicator from \"react-native-web/dist/exports/ActivityIndicator\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport Icon from \"@expo/vector-icons/FontAwesome\";\nimport AsyncStorage from '@react-native-community/async-storage';\nvar STORAGE_KEY = '@starred_repositories';\n\nvar RepositoryLine = function RepositoryLine(_ref) {\n  var repository = _ref.repository;\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      isStarred = _useState2[0],\n      setIsStarred = _useState2[1];\n\n  useEffect(function () {\n    readData();\n  }, []);\n\n  var saveData = function saveData() {\n    return _regeneratorRuntime.async(function saveData$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.prev = 0;\n            console.log(repository.id);\n            _context.next = 4;\n            return _regeneratorRuntime.awrap(AsyncStorage.setItem(STORAGE_KEY, repository.id));\n\n          case 4:\n            alert('Data successfully saved');\n            _context.next = 10;\n            break;\n\n          case 7:\n            _context.prev = 7;\n            _context.t0 = _context[\"catch\"](0);\n            alert('Failed to save the data to the storage');\n\n          case 10:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, [[0, 7]], Promise);\n  };\n\n  var readData = function readData() {\n    var userAge;\n    return _regeneratorRuntime.async(function readData$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.prev = 0;\n            _context2.next = 3;\n            return _regeneratorRuntime.awrap(AsyncStorage.getItem(STORAGE_KEY));\n\n          case 3:\n            userAge = _context2.sent;\n            console.log(userAge);\n\n            if (userAge !== null) {\n              setIsStarred(userAge !== repository.id);\n            }\n\n            _context2.next = 11;\n            break;\n\n          case 8:\n            _context2.prev = 8;\n            _context2.t0 = _context2[\"catch\"](0);\n            alert('Failed to fetch the data from storage');\n\n          case 11:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, [[0, 8]], Promise);\n  };\n\n  return repository ? React.createElement(View, {\n    style: styles.item,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 14\n    }\n  }, React.createElement(View, {\n    style: styles.firstLine,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 17\n    }\n  }, React.createElement(Text, {\n    style: styles.title,\n    numberOfLines: 1,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 21\n    }\n  }, repository.owner.login, \" / \", repository.name, \" \"), React.createElement(TouchableOpacity, {\n    style: styles.stars,\n    activeOpacity: 0.5,\n    onPress: saveData,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 21\n    }\n  }, React.createElement(Icon, {\n    name: isStarred ? \"star\" : \"star-o\",\n    size: 16,\n    color: \"#4C4C58\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 25\n    }\n  }), React.createElement(Text, {\n    style: {\n      marginLeft: 2\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 25\n    }\n  }, repository.stargazers_count))), repository.description && React.createElement(Text, {\n    style: styles.description,\n    numberOfLines: 2,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 44\n    }\n  }, repository.description)) : React.createElement(ActivityIndicator, {\n    style: {\n      flexGrow: 1\n    },\n    size: \"large\",\n    color: \"#608BB3\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 25\n    }\n  });\n};\n\nvar styles = StyleSheet.create({\n  item: {\n    padding: 8,\n    marginHorizontal: 16,\n    borderBottomColor: \"#E6E6E6\",\n    borderBottomWidth: 1,\n    fontSize: 14,\n    color: \"#4C4C58\"\n  },\n  stars: {\n    display: \"flex\",\n    flexDirection: \"row\",\n    alignItems: \"baseline\",\n    marginLeft: 8\n  },\n  title: {\n    color: \"#608BB3\",\n    flexShrink: 1\n  },\n  description: {\n    color: \"#4C4C58\",\n    fontSize: 12,\n    marginBottom: 8\n  },\n  language: {\n    color: \"#4C4C58\",\n    fontSize: 12,\n    fontWeight: 'bold'\n  },\n  firstLine: {\n    display: \"flex\",\n    justifyContent: \"space-between\",\n    marginBottom: 8,\n    flexDirection: \"row\",\n    alignItems: \"center\",\n    flexGrow: 1,\n    position: \"relative\"\n  }\n});\nexport default RepositoryLine;","map":{"version":3,"sources":["/Users/franckcaget/Hedia/frosty/views/RepositoryLine.tsx"],"names":["React","useState","useEffect","Icon","AsyncStorage","STORAGE_KEY","RepositoryLine","repository","isStarred","setIsStarred","readData","saveData","console","log","id","setItem","alert","getItem","userAge","styles","item","firstLine","title","owner","login","name","stars","marginLeft","stargazers_count","description","flexGrow","StyleSheet","create","padding","marginHorizontal","borderBottomColor","borderBottomWidth","fontSize","color","display","flexDirection","alignItems","flexShrink","marginBottom","language","fontWeight","justifyContent","position"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { View, StyleSheet, Text, ActivityIndicator, TouchableOpacity } from 'react-native';\nimport { RepositoryModel } from '../model/repository';\nimport Icon from 'react-native-vector-icons/FontAwesome';\nimport AsyncStorage from '@react-native-community/async-storage';\n\nconst STORAGE_KEY = '@starred_repositories';\n\nconst RepositoryLine = ({ repository }: { repository: RepositoryModel }) => {\n\n    const [isStarred, setIsStarred] = useState(false);\n\n    useEffect(() => {\n        readData()\n    }, [])\n\n    const saveData = async () => {\n        try {\n            console.log(repository.id);\n\n            await AsyncStorage.setItem(STORAGE_KEY, repository.id)\n            alert('Data successfully saved')\n        } catch (e) {\n            alert('Failed to save the data to the storage')\n        }\n    }\n\n    const readData = async () => {\n        try {\n            const userAge = await AsyncStorage.getItem(STORAGE_KEY)\n            console.log(userAge);\n\n            if (userAge !== null) {\n                setIsStarred(userAge !== repository.id)\n            }\n        } catch (e) {\n            alert('Failed to fetch the data from storage')\n        }\n    }\n\n    return (\n        repository ?\n            (<View style={styles.item}>\n                <View style={styles.firstLine}>\n                    <Text style={styles.title} numberOfLines={1}>{repository.owner.login} / {repository.name} </Text>\n                    <TouchableOpacity style={styles.stars} activeOpacity={0.5} onPress={saveData}>\n                        <Icon name={isStarred ? \"star\" : \"star-o\"} size={16} color={\"#4C4C58\"} />\n                        <Text style={{ marginLeft: 2 }} >{repository.stargazers_count}</Text>\n                    </TouchableOpacity>\n                </View>\n                {repository.description && < Text style={styles.description} numberOfLines={2}>{repository.description}</Text>}\n                {/*item.language && <Text style={styles.language} >{item.language}</Text>*/}\n            </View >) : <ActivityIndicator style={{ flexGrow: 1 }} size=\"large\" color=\"#608BB3\" />\n    )\n}\n\nconst styles = StyleSheet.create({\n    item: {\n        padding: 8,\n        marginHorizontal: 16,\n        borderBottomColor: \"#E6E6E6\",\n        borderBottomWidth: 1,\n        fontSize: 14,\n        color: \"#4C4C58\",\n    },\n    stars: {\n        display: \"flex\",\n        flexDirection: \"row\",\n        alignItems: \"baseline\",\n        marginLeft: 8,\n    },\n    title: {\n        color: \"#608BB3\",\n        flexShrink: 1,\n    },\n    description: {\n        color: \"#4C4C58\",\n        fontSize: 12,\n        marginBottom: 8,\n    },\n    language: {\n        color: \"#4C4C58\",\n        fontSize: 12,\n        fontWeight: 'bold'\n    },\n    firstLine: {\n        display: \"flex\",\n        justifyContent: \"space-between\",\n        marginBottom: 8,\n        flexDirection: \"row\",\n        alignItems: \"center\",\n        flexGrow: 1,\n        position: \"relative\"\n    },\n});\n\n\nexport default RepositoryLine;"]},"metadata":{},"sourceType":"module"}